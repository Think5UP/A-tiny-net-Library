# Zigbee 复习

## 第一章

### **zigbee** **技术的特点**

短距离、低功耗、低数据速率、低成本、低复杂度

### **zigbee** **技术3个频段及信道、数据传输范围**

2.4GHz的ISM频段16个信道、欧洲的868MHz1个信道、美国的915MHz10个信道 

传输范围一般介于10～100 m 之间,在增加RF 发射功率后,亦可增加到1～3 km

### **网络设备类型**

全功能设备(FFD)、精简功能设备(RFD)

### **zigbee** **数据传输范围**

传输范围一般介于10～100 m 之间,在增加RF 发射功率后,亦可增加到1～3 km

### **zigbee** **技术应用场景。**

医疗监控系统，无线点餐系统，智能交通控制系统，道路信息采集。

### ---------------------------------------------------------------------------------------------------------------

## 第三章

### **zigbee** **协议栈结构**

![image-20230620191738955](C:\Users\Think5\AppData\Roaming\Typora\typora-user-images\image-20230620191738955.png)

### **网络拓扑及节点类型**

网络拓扑类型: 星形、树型、网状

节点类型：网络协调器、zigbee router、终端节点

### **网络地址分配**

随机分配机制、分布式分配机制

### **信道评估方式**

空闲信道评估1.判断信道的信号能量2.载波判断3.综合前两种模式

### **服务原语种类和含义**

- **① Request：请求原语用于上层向本层请求指定的服务。**
- **② Confirm：确认原语用于本层响应上层发出的请求原语。**
-  **③ Indication：指示原语，由本层发给上层，用来指示本层的某一**
  **内部事件。**
-  **④ Response：响应原语用于上层响应本层发出的指示原语。**

### **收发机状态；**

- **发送状态**

- **接收状态**
- **收发机关闭状态**

### **灵敏度计算（dBm计算）**

 ![image-20230620192452591](C:\Users\Think5\AppData\Roaming\Typora\typora-user-images\image-20230620192452591.png)

10LG

### **协议和服务**

协议：IEEE802.15.4

服务

- 802.15.4MAC层提供两种服务，
  - MAC层数据服务
  - MAC层管理服务
-  PHY物理层
  - 物理层数据服务
  - 物理层管理服务

### **sdu** **和pdu**

- 服务数据单元 SDU( Service Data Unit)：
  - 进入每个子层未被处理的数据称为服务数据单元
- 协议数据单元PDU(Protocol Data Unit)：
  - 经过子层处理后形成特定格式的数据被称为协议数据单元

### **物理层最大负载或净荷**

物理层最大净荷127字节

### **MAC** **层主要功能**

​	**•** **PAN的建立与维护**
​			**• 关联请求与取消**
​			**• 与信标帧的同步**
​			**• 数据的间接传输方式**
​			**• 数据的发送，接收与重传**
​			**• GTS的分配与管理**
​			**• MAC层PIB的维护**
​			• **MAC层的安全策略**

### MAC层工作模式

信标模式(beacon)

非信标模式

### zigbee无线个域网的三种数据传输模型

• **设备发送数据给协调器**；
		• **协调器发送数据给设备**；
		• **对等设备之间的数据传输**

### ---------------------------------------------------------------------------------------------------------------

## 第五章

### **网络层核心功能**

路由和寻址以及网络的建立和维护

### **地址分配方式**

树形编址

随机编址

### **树形编址求网络最大规模**



### **路由算法的设计目标**

• 简单、高效、控制开销小。
		• 无环路、快速收敛。
		• 健壮、稳定、灵活。

### **路由代价的计算，选择最优路径**

![image-20230620195524251](C:\Users\Think5\AppData\Roaming\Typora\typora-user-images\image-20230620195524251.png)

### **网络拓扑的种类及各自的优缺点**



### ---------------------------------------------------------------------------------------------------------------

## 第六章

### **应用层组成**

- **应用支持子层APS**
- **ZigBee设备对象**
- **应用框架**

### **ZDO** **功能**

**提供设备管理的各项功能：包括设备发现、服务发现、绑定管理和网络管理等。**

### **APS** **功能**

• 数据传输
		• 绑定
		• 应用层组播
		• 分片
		• 端到端可靠传输

### **cc2530** **芯片IO控制**

```c
#include<iocc2530.h>
void  main( )
{
     P0SEL &= 0XDF;   
     P0DIR &= 0XDF;
     P0INP &= 0XDF;
     P2INP &= 0XDF;   
     EA = 1;wocaonimazhendehaohifizhendehaohifi
     P0IE = 1;
     P0IEN = 0X20; 
     PICTL = 0X01;   
     P1DIR = 0X01;
     while(1)；
}
#pragma vector = P0INT_VECTOR
__interrupt void fn()
{
   if( P0IFG & 0x20 )
   {
      delay( );
      if(0==P0_5)  
      {
        P1_0=!P1_0;
      }
   }
   P0IFG=0;
   P0IF=0; 
}

```



### **系统时钟**

```c
void Init32M() {
  SLEEPCMD &= 0XFB;
  while (0 == (SLEEPSTA & 0x40));
  delayus();
  CLKCONCMD &= 0XF8;
  CLKCONCMD &= 0XBF;
  while (CLKCONSTA & 0x40);
}
```



### **串口数据收发**

```c
#include<iocc2530.h>
void Cfg32M( )
{
    SLEEPCMD &= 0XFB;
    while( 0 == (SLEEPSTA & 0x40) );
    CLKCONCMD &= 0xF8;
    CLKCONCMD &= 0xBF;
    while(1 == (CLKCONSTA & 0x40));
    SLEEPCMD |= 0x40;
}

void UartCfg( )
{
     PERCFG &= 0xFE; 
     P0SEL |= 0x0C;
     U0CSR |= 0xC0;
     U0GCR = 11;
     U0BAUD = 216;
     EA = 1;
     URX0IE = 1;
}

#pragma vector = URX0_VECT0R
__interrupt void uartcfg( )
{
    URX0IF = 0;
    ch = U0DBUF; 			//接收缓冲寄存器
    U0DBUF = ch;			//发送缓冲寄存器
    while(0 == UTX0IF);	//发送寄存器是否完成发送
    UTX0IF=0;
}

void main( )
{   
     char ch;
     Cfg32M( );
     UartCfg( );
     while(1);
}
```





